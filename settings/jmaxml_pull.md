---
layout: default
title: 気象庁防災情報XML連携（PULL型）
---

気象庁防災情報XMLとシラサギとを連携させ、

1. 震度5強以上の地震発生時に、緊急災害レイアウトに切り替える。
2. 大津波警報発生時に、職員にメールを送る。

などをシラサギにさせることができます。

気象庁防災情報XMLにはPUSH型とPULL型とがあり、これまでシラサギではPUSH型を利用してきましたが、
PUSH型は 2020年（令和2年）8月末に終了することが決まりました。

ここでは v1.13.0 から利用可能なPULL型による気象庁防災情報XMLの受信方法を解説します。
なお、従来のPUSH型による気象庁防災情報XMLの受信を希望される方は、[気象庁防災情報XML連携（PUSH型）](/settings/jmaxml.html)をご参照ください。

## フォルダー作成

シラサギの管理画面にログインし、「RSS取込/気象庁防災情報XML」というフォルダーを作成してください。
作成するフォルダーの名前、ファイル名などは何でも構いません。
なお、パフォーマンス上の理由から、「RSS取込/気象庁防災情報XML」フォルダーは、1 サイトに 1 つとしてください。

## 定期実行

次の定期実行を設定してください。

~~~
## 気象庁防災情報XML受信
*/2 * * * * /bin/bash -l -c 'cd /var/www/shirasagi && bundle exec rake rss:pull_weather_xml' >/dev/null
~~~

上記のコマンドは 2 分間隔で気象庁防災情報XMLを受信する設定となっております。

ご利用のサーバーによっては 2 分間隔では短い場合がございますので、定期実行コマンドを追加後、しばらくはサーバーの利用状況を注視し、受信処理が 2 分以内に終わらないようであれば、実行間隔を長くしてください。

実行したコマンドの状況は、お使いの OS の定期実行サービスのログや、シラサギの管理画面のシステム設定 - ジョブ - 実行履歴（/.sys/job/logs）より確認することができます。

## 確認方法

定期実行コマンドが実行されるたびに、「RSS取込/気象庁防災情報XML」フォルダー内に受信した電文が作成されます。
