---
layout: default
title: チャットボット LINE 連携
---

バージョン1.14.0よりチャットボットと LINE の連携が可能になりました。

以下の仕様になっています。
 - 運用するサイトに、LINE公式アカウントを用意する。
 - 用意したLINE公式アカウントとのトーク時、連携したチャットボットにより自動返答される。

チャットボット LINE 連携を有効にするための設定方法を説明します。

## チャットボット LINE 連携

1. [LINE公式アカウントを開設します。](https://www.linebiz.com/jp/signup/)
2. [LINE Developer コンソール](https://developers.line.biz/console/) へアクセスし、開設した公式アカウントの Messaging API チャネルを作成します。
3. 作成したチャネルの基本設定より、チャネルシークレットを取得します。
4. Messaging API設定より、チャネルアクセストークンを取得します。
5. Messaging API設定より、Webhook URL に `(チャットボットのフォルダーの URL)/line` を設定します。
6. 取得したトークンを、シラサギのサイト設定に設定します。対応は次のとおりです。

   | LINE Channel Tokens | シラサギのサイト設定のLINE設定 |
   |--------------------------------|-----------------------------------|
   | チャネル基本設定 ＞ チャネルシークレット | チャンネルシークレット |
   | Messaging API設定 ＞ チャネルアクセストークン（長期）| チャンネルアクセストークン |

以上で設定は完了です。

正しく設定が完了すると、用意したLINE公式アカウントとのトーク時に連携したチャットボットにより自動返答されます。

## 施設検索・イベント検索

LINE から位置情報を送信することで周辺の施設・イベントを検索することができます。

1. チャットボットのフォルダーの編集画面から位置情報送信テキストと半径(km)を入力する
2. LINE公式アカウントとのトーク画面から位置情報送信テキストを入力する
3. 位置情報を送信する
4. 施設とイベントのどちらを検索するか選択する
5. 半径(km)以内の施設またはイベントが表示される
